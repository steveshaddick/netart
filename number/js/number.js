var page=0;var isWaiting=false;var lastID=0;var lastTime=0;function nextPage(){page++;checkNumbers(true)}function previousPage(){page--;checkNumbers(true)}function checkNumbers(a){if(a==null){a=false}if(isWaiting){return}if((page>0)&&(!a)){return}if(a){$("#guessedNumbers").html("loading...");window.scroll(0,0)}$.ajax({url:"checkNumbers.php",data:({page:page,lastID:lastID}),type:"POST",dataType:"json",success:showGuessed})}function showGuessed(c){isWaiting=false;if(c.guesses.length==0){return}var b="";lastID=c.guesses[0]["guess_id"];for(var a=0;a<c.guesses.length;a++){b+=c.guesses[a]["guess"]+"<br />"}if($("#guessedNumbers").html()=="loading..."){$("#guessedNumbers").html("")}$("#guessedNumbers").html(b+$("#guessedNumbers").html());if(c.next){$("#nextPage").css("visibility","visible")}else{$("#nextPage").css("visibility","hidden")}if(c.previous){$("#previousPage").css("visibility","visible")}else{$("#previousPage").css("visibility","hidden")}if(page>0){lastID=0}}function guessNumber(){var a=new Date().getTime();a=parseInt(a/1000);if(a<=lastTime){alert("You may only make one guess per second.");return}var b=$("#txtGuess").val();b=b.replace(/[^0-9]+/g,"");$("#txtGuess").val(b);if($("#txtGuess").val()==""){return}$("#guessStatus").html("Checking...");isWaiting=true;setTimeout(sendGuess,2000)}function sendGuess(){$.ajax({url:"guessNumber.php",data:({guess:$("#txtGuess").val()}),type:"POST",dataType:"json",success:guessResult})}function guessResult(a){isWaiting=false;if(a.guessed){alert("This is amazing!  You have guessed the number!");window.location="amazing.php";return}$("#txtGuess").val("");$("#guessStatus").html(a.message)}function disableEnterKey(b){var a;if(window.event){a=window.event.keyCode}else{a=b.which}if(a==13){guessNumber()}return(a!=13)}function filter(c){var b;if(window.event){b=window.event.keyCode}else{b=c.which}var a=((b<32)||((b>=48)&&(b<=57))||(b==127))?true:false;return a};